version: '3'
services:
  web1:
    build:
      context: ./web1/
    ports:
     - "3001:3000"
  web2:
    build:
      context: ./web2/
    ports:
     - "3002:3000"
  web3:
    build:
      context: ./web3/
    ports:
     - "3003:3000"
  nginx:
    image: "nginx:1.15.6-alpine"
    ports:
     - "8080:80"
    volumes:
      - ./nginx/conf.d/default.conf:/etc/nginx/conf.d/default.conf
      - ./nginx/nginx.conf:/etc/nginx/nginx.conf
    links:
      - web1
      - web2
      - web3
